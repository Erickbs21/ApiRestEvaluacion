## üîó Link de el diagrama de base de datos:
[![portfolio](https://img.shields.io/badge/my_portfolio-000?style=for-the-badge&logo=ko-fi&logoColor=white)](https://mermaid.live/edit#pako:eNrtWktz2zgS_isoVqUqqVEeduKJ45siyxntWLZWkrNVW65iQSSsIEMSHJB0Jc7kj-xtjjnklFuu-mPbjQefIK1cducwOcRkAw02Gt1fP6BPXiBC5p14TJ5yupU0vk4I_HvwgEyTnIc0ZBlJJU8CntKIZXp0cj6bXqyn5JN-xX88yUkQcZbkzOchWfxKrr1JRG8ZcsdUcnrtVbOzHJbckjDl5ApnnoqgiIFXkAWTmUhoREJGZiGQ-A0PaMB33xLHAomINxIkvPYuzFPIIiuHYz5NWRTxUCDHuHwe5mEx5ZEWcyKkZIKwiAW5BIl4IMjuO_5x8OUw7UYkAoXbfY-ZFLgnoO6-ILnOEdKckRsWvKN-AnuNuVLFtXeGJOSqqC4tcsmCgIsEFamfQTYSiDiNWN7QO0uKmGxZgsJce_MRORuRy1yKzhyW5TQUfsBvYe_X3kpEOfCMyIRmQB-RU34rZMDV81tehC65UiluWKblWuhnlKsgcNhp90hDBnuEgwdWOEiR-WAQWYFGB_wzQyQVEeZHVIIEWUf6nKcguz5RxRzCPkJgG5FpnMJCaI_w8na26Nk52keQwyZHZAbK10-rIksZrIWbfh2J3wtGw8455jy2ZynZloMuGidZ0lgCdkQyeAEDcy5SRPCH-urr6ImwzO4_ikYqWo_tojtmRVDIjEalHOiYZ2jHKzNCQpGATFkp1u6b4xwDifv0UyGB9Qq0L7kgsHkc2H3DXdgPDOgCFzE2WupC09Amwp5FjASxCBUMOKUwg3tLYhdrS7P7rnVbjdcM9PN1oh9WV5Or5Wp83sa-Utl7gx8AL98K3zIahNl9Q6pBFRTLjveiXwl-ODuiQww_gBRdEFtb5Lr_Oxoyr72p-osnLZIcbNaJXiylMqexgbzT2uvTqfJFl0EUoB6ecoVi9vnpBICIho7pdxBRwHJgtaimY01wQVBEc54XoUJ8ISEK0ZDqXSu6k0UkWzePGXCDVHn6CJEmygLQsKBIQrSbERkDXAf4MKHvWdOwlVG_ExJdwYfQJvNCUljpFyDhpy2plyfgTCoDshyacA8m0hIT4WlOAXkSR3BqeV1NvNLjSlq_QaFrbZm0aYVCrylaK8pjBu63x_8TgpWgMZ0vzqfj08s2aDCzkx8GDcvYBxp2_H-Xcw18sT_pGmC6J-sKhITTpBiX_4KpV9_e9km_bPJUgNPhrAmVcLTCEnAfkm7o--7CLSR9C39pBh8AL1OGy-BlpfMNeFouf_llRN6gCwVNU7OQBr6kHAXyBfNkkq8e_ZnEra48S6LooEynXj3c8DVIaOrMhvIw42BCEVjkox9J1t7SoNz1OQ8MiJ4ySOEwg-tNljo5Es34FsG8ywGKveWZkF1kqsYcR1toAPJN7leDJDg_zO0CpTJncqh2nfBbFvlm3rX3GiQM1N4hR49hd_A8vqXJncrOx2HME4QleJN_Z3fD2d3kCuracaeuLdCV9gdpOCPwcF-zaQyzMFRBtB5tG1WthD7T39JFDNRSKYcUDdTSU-3oj4EnQHBXlRr8UbwjsojonfDP-HskSzAQJ5ZpXK8WKpPKLJA8RacygbYreQ0x4BDBAwuV0azwlZjX_XhDnqUi4ZuIlfw1kvIPsOQko4H2bWcqBngNKgz0TmGd891XpGij3H1R1B5Uaa0RcoOAtSUa3ydqBs2cZp0wBWhv1v8ckavVKRSfV8sfya1sjYnJH-RlLQyqYeceyZVD8RV_mQdWzqspPVpqAKb90EB1STeSN0vLRvbTWaHEUUQAzTxsPBDoMP4A_qnEZA2vOvwAZfclM3sAE2rLAMeX-VuMj6i8091XipkJMRRlb5nYIO7IZp9hIwSImAAk_V6ArphPi1xIfmeBZ8XLIVINIRoOG7EN_zypPHExuwBbUV6IShk60KpxIAAKb7v5TGSQEIJ5Ofx3VBiOCovxm07qntKt-OGIUDv1vrBQTmkl37U4BLYEOWQVIrSZAK8e6OECHM95IhxsZmQw0VIxBvesS3SRAYZCDgk6xlizRqFvTCoJ8QZ1s8IECHaamfeFRKSLu-ErKzb11adwYjqDm7wDB2Kt1f3xBNLWNZXvmRsKAHaVwc_VX-0rfUq1PIGIuWlUTtQj2qdWRej8CI_L_HxmH8180SuUnwvdgNCi6beHWt6fjAz44Z_K5R85K8AkYKnplajQXLkTqtDBIlmpPfYBEDFBUFmWRGKJPQbQymrUqTQrK0Pbi7-Fk7VVGjDZHycX2II1iY0UkAPTJFT5jm5i4fMZVUUm9kxAWZGiLdktRBk-2LCt-6dFiY-qW3KfITXXSbVc3WKyMTCwwC2NFOZpRv2m4oaJcc2YMVy_1Hq8UFDdDcRhZ_jVIne5AtWOQh7wgVPdh1YkdY7x7s8cEW3YJHhqwAzXWCAQIRxZeXGIJ-6WNE10hmk2CWXOem4qoITlIzIXGx4xNIAo8idoLdKZ8kLi4NMQcSoxNw0XSCM12kCii8tyqP_KTZiM19AN9DpwubkONiKdC5UD-65USmQxvU8kM76PTO2lOkI51vqL9N1ez9bjyeWyU9BteE4DIfcp6aroB_ihvflcgFmOCPwRRW7CkwYNRKEkg_QLguAUqjBZNlxcbbGycdSEccQZAzHGZVtByDa5IJ-F1B_DJVV1xhoJSr03mDabgbbflpdBZkLThcvrKTvq-LCCI5aVxqbc5q0mKkMzN6o03sBxP_zH6vLi0cAyScFuRX0JsKe0wKx9cBXci-2kWOCqm5hFu5o69y22JYQM5f2hGKqA-nFzzwX6MbtagN4PoTQMQW1ZswWp4DSyGnJ2oZj0KaBJrm5Ib4SMay6VgD9ssWP0lKapgxsiECZMNdtRLXh9xdvTsMowApuLTPzgiPyLygRWK51lIjlEjW6DUaEB_ocZZNoOzewDFMy6ttE-6q4miqjecpvvviFFcVkqmo3qzmpsisTWtRLLhapZuVrlC77h9seLGYkiGtNubzHnYCrCl2jXuAU_VkWqouo7YTOAl8Ixj3jGtkXSuthuXQCgwmqtf-z5K9KwtWADF4J0yT7X7xV7CBlUFLn9HgQMfsMcKVDNGXwj-k2pHvldFbI-E4BxrjICVRqDlxd2BHsyX3P3byjg8EU7QJ8irR6gUWvKfGEthIlOGHjwgChsVKV9JiAcgZN_BGjJd3_CIQvzq5b1bHHpn15OrubTi3Wn4FMxILR3Jjpy9JwO1HY93TXH7afBfpF0Nadb2Z1idDmeT9fLS381W62n83G3MpUUjFT2yqhinUNEBcj7SVhFRTwhZQ1SOTJmYFsmsdGusokRea03AxTa_ImC3aWtvbE7059A3JsetNQ0vjqdrS-Xs7Hv7unSAtuAEOzbWmo2fM9-vS_V6htXYc2BQ3ikvo5qfe0wUwd1vt-6UbU7aO38fDafraf-ejm-WI0nk9nlRffXCqa9uffWq_PWnCrWYGDBu-oYk3FIubuXQxVbs7Ia6Bv0V8_6y32jRc5VpiR6rqYQLZxDN3xfz3s9vZiezSaz8XLWQYcNhA0wYm7Tkf3U2uy819cYvlMYnrqBolcMT1G3q8NT7B1qzyyXpgZ-AtVF5KVJcYZ-X_jHH48fi0_2VuYELAeKD1aiSPlbHDvPsOFE82HaN7e8ksfJ-kaV-lVpVQ67ptvbPdo3uyYw3VS_p2hPU31FtSvdFrDzDHt7VrP465nUKsba2y7nmcqitmXXyaiujIKZ3VfqPJuyxMJFVfLUq5XGVPaeBUXeezyNuRB0JfjHvaKa0O7STyccqLPBrdVKpCaLE0eVtUCVwAwcZW7eBlRUPHVXyvrU1COqjgnXnjfytpBFeye5LNjIA1QAX4ZXTyESfOkdi8HilC1Q-Rt-5TPwpDT5txCxZZOi2L7zTm5olMFbkaLbmh8Al1NYEjI5EUWSeyeHxz-rNbyTT94H7-T54bMnh4fHR0fPjo9eHv18eDzyPnonjw8ODp-8en744sXhq6ODo6Pjl88_j7w79dmDJweHx8cvXr188eLZweHzw-MXn_8LnfHPWA)

# üè¶ MiBanco API

**API REST para servicios bancarios** - Sistema completo de gesti√≥n bancaria desarrollado en .NET 8

[![.NET](https://img.shields.io/badge/.NET-8.0-blue.svg)](https://dotnet.microsoft.com/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](https://opensource.org/licenses/MIT)
[![Status](https://img.shields.io/badge/Status-Active-brightgreen.svg)]()

---

## üìã Tabla de Contenidos

- [üöÄ Inicio R√°pido](#-inicio-r√°pido)
- [üìñ Descripci√≥n](#-descripci√≥n)
- [üèóÔ∏è Arquitectura](#Ô∏è-arquitectura)
- [üîß Instalaci√≥n](#-instalaci√≥n)
- [üìö Documentaci√≥n de Endpoints](#-documentaci√≥n-de-endpoints)
- [üß™ Ejemplos de Uso](#-ejemplos-de-uso)
- [‚öôÔ∏è Configuraci√≥n](#Ô∏è-configuraci√≥n)
- [üîí Seguridad](#-seguridad)
- [üìä Monitoreo](#-monitoreo)
- [ü§ù Contribuci√≥n](#-contribuci√≥n)

---

## üöÄ Inicio R√°pido

### Prerrequisitos
- .NET 8.0 SDK
- Visual Studio 2022 o VS Code
- Postman (opcional, para pruebas)

### Ejecutar la API
\`\`\`bash
git clone <tu-repositorio>
cd MiBancoAPI
dotnet restore
dotnet run
\`\`\`

### Acceder a la Documentaci√≥n
- **Swagger UI**: `https://localhost:7xxx/index.html`
- **Health Check**: `https://localhost:7xxx/health`
- **API Info**: `https://localhost:7xxx/api/info`

---

## üìñ Descripci√≥n

MiBanco API es un sistema bancario completo que proporciona servicios para:

- ‚úÖ **Gesti√≥n de Clientes**: Registro, consulta y administraci√≥n
- ‚úÖ **Procesamiento de Pagos**: Dep√≥sitos, retiros y transferencias
- ‚úÖ **Sistema de Auditor√≠a**: Logging completo de operaciones
- ‚úÖ **Monitoreo**: Health checks y m√©tricas
- ‚úÖ **Documentaci√≥n**: Swagger UI integrado

### Caracter√≠sticas Principales

| Caracter√≠stica | Descripci√≥n |
|----------------|-------------|
| üèóÔ∏è **Arquitectura Limpia** | Separaci√≥n de responsabilidades |
| üîí **Seguridad** | Rate limiting, CORS, validaciones |
| üìä **Logging** | Serilog con archivos rotativos |
| üß™ **Validaciones** | FluentValidation integrado |
| üìö **Documentaci√≥n** | Swagger con ejemplos |
| üè• **Health Checks** | Monitoreo de servicios |

---

## üèóÔ∏è Arquitectura

\`\`\`
MiBancoAPI/
‚îú‚îÄ‚îÄ Controllers/          # Controladores de API
‚îú‚îÄ‚îÄ Models/              # Modelos de datos
‚îÇ   ‚îú‚îÄ‚îÄ Entities/        # Entidades del dominio
‚îÇ   ‚îî‚îÄ‚îÄ DTOs/           # Objetos de transferencia
‚îú‚îÄ‚îÄ Services/           # L√≥gica de negocio
‚îú‚îÄ‚îÄ Middleware/         # Middleware personalizado
‚îú‚îÄ‚îÄ Extensions/         # M√©todos de extensi√≥n
‚îú‚îÄ‚îÄ Validators/         # Validadores FluentValidation
‚îî‚îÄ‚îÄ Filters/           # Filtros de acci√≥n
\`\`\`

### Patrones Implementados
- **Repository Pattern** (simulado en memoria)
- **Dependency Injection**
- **Middleware Pipeline**
- **DTO Pattern**
- **Response Wrapper Pattern**

---

## üîß Instalaci√≥n

### 1. Clonar el Repositorio
\`\`\`bash
git clone <tu-repositorio>
cd MiBancoAPI
\`\`\`

### 2. Restaurar Dependencias
\`\`\`bash
dotnet restore
\`\`\`

### 3. Configurar Appsettings
\`\`\`json
{
  "MiBancoSettings": {
    "MaxTransactionAmount": 100000,
    "MinimumAge": 18,
    "MaxDailyTransactions": 10
  }
}
\`\`\`

### 4. Ejecutar la Aplicaci√≥n
\`\`\`bash
dotnet run
\`\`\`

---

## üìö Documentaci√≥n de Endpoints

### üè† **Sistema**

#### GET `/api/info`
Obtiene informaci√≥n general de la API.

**Respuesta:**
\`\`\`json
{
  "name": "MiBanco API",
  "version": "1.0.0",
  "environment": "Development",
  "timestamp": "2024-01-07T10:30:00Z",
  "status": "Running"
}
\`\`\`

#### GET `/health`
Verifica el estado de la API y servicios externos.

**Respuesta:**
\`\`\`json
{
  "status": "Healthy",
  "totalDuration": "00:00:00.0123456",
  "entries": {
    "database": {
      "status": "Healthy",
      "description": "Base de datos funcionando correctamente"
    }
  }
}
\`\`\`

---

### üë• **Clientes**

#### GET `/api/cliente`
Obtiene todos los clientes activos.

**Respuesta:**
\`\`\`json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "dpi": "1234567890101",
      "nombreCompleto": "Juan Carlos Garc√≠a L√≥pez",
      "email": "juan.garcia@email.com",
      "telefono": "12345678",
      "edad": 38,
      "saldoFormateado": "Q5,000.00",
      "estado": 1,
      "fechaCreacion": "2024-01-07T10:00:00Z"
    }
  ],
  "message": "Se encontraron 2 clientes"
}
\`\`\`

#### GET `/api/cliente/{dpi}`
Obtiene un cliente espec√≠fico por su DPI.

**Par√°metros:**
- `dpi` (string): N√∫mero de DPI de 13 d√≠gitos

**Ejemplo:** `GET /api/cliente/1234567890101`

**Respuesta:**
\`\`\`json
{
  "success": true,
  "data": {
    "id": 1,
    "dpi": "1234567890101",
    "nombres": "Juan Carlos",
    "apellidos": "Garc√≠a L√≥pez",
    "email": "juan.garcia@email.com",
    "telefono": "12345678",
    "fechaNacimiento": "1985-05-15T00:00:00Z",
    "direccion": "Zona 10, Ciudad de Guatemala",
    "saldoCuenta": 5000.00,
    "estado": 1,
    "nombreCompleto": "Juan Carlos Garc√≠a L√≥pez",
    "edad": 38,
    "saldoFormateado": "Q5,000.00"
  },
  "message": "Cliente encontrado exitosamente"
}
\`\`\`

#### POST `/api/cliente`
Crea un nuevo cliente.

**Body:**
\`\`\`json
{
  "dpi": "5555555555555",
  "nombres": "Ana Mar√≠a",
  "apellidos": "Gonz√°lez P√©rez",
  "email": "ana.gonzalez@email.com",
  "telefono": "55555555",
  "fechaNacimiento": "1992-03-15T00:00:00",
  "direccion": "Zona 15, Ciudad de Guatemala",
  "saldoInicial": 2500.00
}
\`\`\`

**Validaciones:**
- DPI: 13 d√≠gitos, √∫nico
- Nombres/Apellidos: 2-100 caracteres, solo letras
- Email: formato v√°lido
- Tel√©fono: 8 d√≠gitos
- Edad: mayor de 18 a√±os
- Saldo inicial: 0 - 1,000,000

---

### üí∞ **Pagos**

#### GET `/api/pago`
Obtiene todos los pagos registrados.

**Respuesta:**
\`\`\`json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "dpiCliente": "1234567890101",
      "monto": 500.00,
      "montoFormateado": "Q500.00",
      "concepto": "Pago de servicios b√°sicos",
      "tipoPago": 1,
      "numeroReferencia": "REF001",
      "fechaPago": "2024-01-02T10:00:00Z",
      "estado": 3
    }
  ],
  "message": "Se encontraron 2 pagos"
}
\`\`\`

#### GET `/api/pago/cliente/{dpi}`
Obtiene el historial de pagos de un cliente.

**Ejemplo:** `GET /api/pago/cliente/1234567890101`

#### POST `/api/pago`
Crea un nuevo pago.

**Body:**
\`\`\`json
{
  "dpiCliente": "1234567890101",
  "monto": 1000.00,
  "concepto": "Dep√≥sito en efectivo",
  "tipoPago": 2,
  "numeroReferencia": "DEP001",
  "notasAdicionales": "Dep√≥sito realizado en sucursal"
}
\`\`\`

**Tipos de Pago:**
- `1`: Transferencia
- `2`: Dep√≥sito
- `3`: Retiro
- `4`: Pago de Servicios
- `5`: Pago de Pr√©stamo

**Estados de Pago:**
- `1`: Pendiente
- `2`: Procesando
- `3`: Completado
- `4`: Fallido
- `5`: Cancelado

---

### üìã **Logs**

#### GET `/api/log`
Obtiene todos los logs del sistema.

#### GET `/api/log/fecha/{fecha}`
Obtiene logs de una fecha espec√≠fica.

**Ejemplo:** `GET /api/log/fecha/2024-01-07`

#### GET `/api/log/nivel/{nivel}`
Obtiene logs por nivel de severidad.

**Niveles:**
- `1`: Info
- `2`: Warning
- `3`: Error
- `4`: Debug

---

## üß™ Ejemplos de Uso

### Flujo Completo de Operaciones

#### 1. Crear un Cliente
\`\`\`bash
curl -X POST "https://localhost:7xxx/api/cliente" \
  -H "Content-Type: application/json" \
  -d '{
    "dpi": "9999999999999",
    "nombres": "Carlos",
    "apellidos": "Mendoza",
    "email": "carlos@email.com",
    "telefono": "99999999",
    "fechaNacimiento": "1990-01-01T00:00:00",
    "direccion": "Zona 1, Guatemala",
    "saldoInicial": 1000.00
  }'
\`\`\`

#### 2. Realizar un Dep√≥sito
\`\`\`bash
curl -X POST "https://localhost:7xxx/api/pago" \
  -H "Content-Type: application/json" \
  -d '{
    "dpiCliente": "9999999999999",
    "monto": 500.00,
    "concepto": "Dep√≥sito inicial",
    "tipoPago": 2
  }'
\`\`\`

#### 3. Consultar Saldo
\`\`\`bash
curl -X GET "https://localhost:7xxx/api/cliente/9999999999999"
\`\`\`

#### 4. Ver Historial
\`\`\`bash
curl -X GET "https://localhost:7xxx/api/pago/cliente/9999999999999"
\`\`\`

---

## ‚öôÔ∏è Configuraci√≥n

### Variables de Entorno

| Variable | Descripci√≥n | Valor por Defecto |
|----------|-------------|-------------------|
| `ASPNETCORE_ENVIRONMENT` | Entorno de ejecuci√≥n | Development |
| `ASPNETCORE_URLS` | URLs de escucha | https://localhost:7xxx |

### Configuraci√≥n de Aplicaci√≥n

\`\`\`json
{
  "MiBancoSettings": {
    "MaxTransactionAmount": 100000,
    "MinimumAge": 18,
    "MaxDailyTransactions": 10,
    "EnableNotifications": true
  },
  "ExternalServices": {
    "BankingServiceUrl": "https://api.external-bank.com",
    "Timeout": "00:00:30"
  }
}
\`\`\`

### Rate Limiting

- **L√≠mite**: 100 requests por minuto
- **Cola**: 10 requests en espera
- **Pol√≠tica**: Ventana fija

---

## üîí Seguridad

### Medidas Implementadas

- ‚úÖ **HTTPS Obligatorio**
- ‚úÖ **CORS Configurado**
- ‚úÖ **Rate Limiting**
- ‚úÖ **Validaci√≥n de Entrada**
- ‚úÖ **Manejo de Excepciones**
- ‚úÖ **Logging de Seguridad**

### Validaciones de Negocio

- **DPI**: √önico, 13 d√≠gitos
- **Edad**: M√≠nimo 18 a√±os
- **Montos**: L√≠mites configurables
- **Saldos**: No negativos
- **Retiros**: Verificaci√≥n de fondos

---

## üìä Monitoreo

### Health Checks

La API incluye verificaciones de salud en `/health`:

- **Database**: Simulaci√≥n de conexi√≥n a BD
- **External Services**: Verificaci√≥n de servicios externos
- **Memory**: Uso de memoria
- **Disk**: Espacio disponible

### Logging

Configurado con **Serilog**:

- **Console**: Desarrollo
- **File**: Archivos rotativos diarios
- **Structured**: Formato JSON
- **Levels**: Info, Warning, Error, Debug

### M√©tricas

- Tiempo de respuesta por endpoint
- N√∫mero de requests por minuto
- Errores por tipo
- Uso de recursos

---

## üöÄ Despliegue

### Desarrollo Local
\`\`\`bash
dotnet run --environment Development
\`\`\`

### Producci√≥n
\`\`\`bash
dotnet publish -c Release
dotnet MiBancoAPI.dll --environment Production
\`\`\`

### Docker (Futuro)
\`\`\`dockerfile
FROM mcr.microsoft.com/dotnet/aspnet:8.0
COPY . /app
WORKDIR /app
EXPOSE 80
ENTRYPOINT ["dotnet", "MiBancoAPI.dll"]
\`\`\`

---

## üß™ Testing

### Postman Collection

Importa la colecci√≥n de Postman incluida para probar todos los endpoints:

1. Abrir Postman
2. Import ‚Üí File ‚Üí Seleccionar `MiBanco-API.postman_collection.json`
3. Configurar variable `baseUrl` con tu puerto local

### Casos de Prueba

- ‚úÖ Crear cliente v√°lido
- ‚úÖ Validaciones de DPI
- ‚úÖ Dep√≥sitos y retiros
- ‚úÖ Saldos insuficientes
- ‚úÖ Clientes inexistentes
- ‚úÖ Rate limiting
- ‚úÖ Health checks

---
### FAQ

**Q: ¬øC√≥mo cambio el puerto?**
A: Modifica `launchSettings.json` o usa `--urls` parameter.

**Q: ¬øD√≥nde est√°n los logs?**
A: En la carpeta `logs/` con rotaci√≥n diaria.

**Q: ¬øC√≥mo agrego m√°s validaciones?**
A: Extiende los validators en `Validators/`.

---


## Herramientas:

- **Microsoft** por .NET 8
- **Swashbuckle** por Swagger integration
- **Serilog** por logging
- **FluentValidation** por validaciones

---

**¬°Gracias por ver mi  API!** üè¶‚ú®

